<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"
    />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <script src="http://localhost:35729/livereload.js"></script>
    <title key="title"></title>
  </head>
  <body>
    <!-- <script src="../common/scripts/game.js"></script> -->
    <script>
      let playAgain = true;
      let userName = prompt("What's your name?");
      alert("Hello, " + userName + ". Let's play the game");
      let words = [];
      while (playAgain === true) {
        words = [
          "name",
          "tree",
          "truth",
          "help",
          "cloud",
          "elephant",
          "dog",
          "cat",
          "computer",
          "game"
        ];

        let word = words[
          Math.floor(Math.random() * words.length)
        ].toUpperCase();

        let answerArray = [];
        for (let i = 0; i < word.length; i++) {
          answerArray[i] = "_";
        }
        let remainingLetters = word.length;
        outer_loop: while (remainingLetters > 0) {
          let guess = "";
          alert(
            "Guess the word\n" +
              "Remaining " +
              remainingLetters +
              " letters\n" +
              answerArray.join(" ").toUpperCase()
          );
          guess = prompt(
            "Enter letter or click 'Cancel' to quit"
          ).toUpperCase();

          if (guess === null) {
            break outer_loop;
          } else if (guess.length === 0) {
            alert("Please type a letter");
          } else if (guess.length !== 1) {
            alert("Please add only one letter");
          } else {
            // Обновляем состояние игры
            let counter = 0;
            for (let j = 0; j < word.length; j++) {
              if (word[j] === guess && answerArray[j] === "_") {
                answerArray[j] = guess;
                remainingLetters--;
                counter++;
              }
            }
            if (counter === 0) {
              alert(
                "There is no such letter in the searching word or letter is already found. Try another letter"
              );
            }
          }
        }
        // alert(answerArray.join(" "));
        if (remainingLetters === 0) {
          alert(
            "Well done, " + userName + "! The word is: " + word.toUpperCase()
          );
        } else {
          alert("Attempt failed. Game is over");
        }

        playAgain = confirm("Let's play one more time???");
      }
      alert("Goodbye!");
    </script>
  </body>
</html>
